CREATE DATABASE BDVElectro;
USE BDVElectro;

CREATE TABLE DISTRITO(
ID_DIST INT PRIMARY KEY AUTO_INCREMENT,
NOM_DIST VARCHAR(50)
);
INSERT INTO DISTRITO VALUES (NULL,'SAN JUAN DE LURIGANCHO');
INSERT INTO DISTRITO VALUES (NULL,'CHORRILOS');
INSERT INTO DISTRITO VALUES (NULL,'SURCO');
INSERT INTO DISTRITO VALUES (NULL,'RIMAC');

CREATE TABLE TIPO_USUARIO(
ID_TIP_USU INT  PRIMARY KEY AUTO_INCREMENT ,
NOM_TIP_USU VARCHAR(35) 
);
INSERT INTO TIPO_USUARIO VALUES (NULL,'ADMINISTRADOR');
INSERT INTO TIPO_USUARIO VALUES (NULL,'CAJERO');
INSERT INTO TIPO_USUARIO VALUES (NULL,'REPARTIDOR');
select * FROM TIPO_USUARIO;

CREATE TABLE USUARIO(
ID_USU INT  PRIMARY KEY AUTO_INCREMENT,
NOM_USU VARCHAR(50),
APE_USU VARCHAR(50),
DNI_USU CHAR(8),
DIR_USU VARCHAR(60),
CLAVE_USU VARCHAR(10),
ID_TIP_USU INT, 
ID_DIST INT,
EST_USU CHAR(1),  
 FOREIGN KEY (ID_TIP_USU)REFERENCES TIPO_USUARIO (ID_TIP_USU),
 FOREIGN KEY (ID_DIST)REFERENCES DISTRITO(ID_DIST)
);
INSERT INTO USUARIO VALUES (null,'RONALD','RAMOS','70408502','LAS FLORES','RO12345','1','2','A');
INSERT INTO USUARIO VALUES (null,'ALEX','JUSTINIANO','70508502','AV RIOS','ALE123','2','1','A');


SELECT NOM_USU,NOM_TIP_USU FROM USUARIO INNER join TIPO_USUARIO WHERE USUARIO.ID_USU=
TIPO_USUARIO.ID_TIP_USU;


SELECT * FROM USUARIO;

CREATE TABLE CLIENTE(
ID_CLI INT  PRIMARY KEY AUTO_INCREMENT ,
DNI_CLI CHAR(8),
NOM_CLI VARCHAR(40),
FONO_CLI CHAR(9),
CORREO_CLI  VARCHAR(50),
CLAVE_CLI VARCHAR(50),
ID_DIST INT,  
DIREC_CLI VARCHAR(70),
 FOREIGN KEY (ID_DIST)REFERENCES DISTRITO(ID_DIST)
)default charset=latin1;

INSERT INTO CLIENTE VALUES (NULL,'70484541','CAMILA','968657448','CAMILA@GMAIL.COM',aes_encrypt('CAMILA121','aes'),'1','LAS FLORES');


CREATE TABLE TIPO_COMPROBANTE(
ID_TIP_COMP INT PRIMARY KEY AUTO_INCREMENT ,
NOMB_TIPO_COMP VARCHAR(20)
);
INSERT INTO TIPO_COMPROBANTE VALUES (NULL,'BOLETA');
INSERT INTO TIPO_COMPROBANTE VALUES (NULL,'BOUCHER');
INSERT INTO TIPO_COMPROBANTE VALUES (NULL,'FACTURA');

CREATE TABLE CATEGORIA(
ID_CAT INT  PRIMARY KEY AUTO_INCREMENT ,
CAT_DESCRIPCION VARCHAR(50)
);
INSERT INTO CATEGORIA VALUES (NULL,'LAPTOPS');
INSERT INTO CATEGORIA VALUES (NULL,'PC');
INSERT INTO CATEGORIA VALUES (NULL,'CELULAR');
INSERT INTO CATEGORIA VALUES (NULL,'TELEVISOR');
INSERT INTO CATEGORIA VALUES (NULL,'AUDIFONOS');
INSERT INTO CATEGORIA VALUES (NULL,'CONSOLA');
INSERT INTO CATEGORIA VALUES (NULL,'MOUSE');
INSERT INTO CATEGORIA VALUES (NULL,'TECLADOS');

CREATE TABLE MARCA(
ID_MARCA INT  PRIMARY KEY AUTO_INCREMENT ,
NOMBRE VARCHAR (50),
ID_PROV INT
);
INSERT INTO MARCA VALUES (NULL,'HUAWEI','1');
INSERT INTO MARCA VALUES (NULL,'ASUS','1');
INSERT INTO MARCA VALUES (NULL,'TRUST','1');
INSERT INTO MARCA VALUES (NULL,'ADVANCE','1');
INSERT INTO MARCA VALUES (NULL,'SAMSUNG','1');
INSERT INTO MARCA VALUES (NULL,'SONY','1');
INSERT INTO MARCA VALUES (NULL,'LOGITECH','1');
INSERT INTO MARCA VALUES (NULL,'JBL','1');
INSERT INTO MARCA VALUES (NULL,'MAXELL','1');
INSERT INTO MARCA VALUES (NULL,'MOTOROLA','1');
INSERT INTO MARCA VALUES (NULL,'SKULLCANDY','1');
INSERT INTO MARCA VALUES (NULL,'PANASONIC','1');
INSERT INTO MARCA VALUES (NULL,'LG','1');
INSERT INTO MARCA VALUES (NULL,'MOTOROLA','1');
INSERT INTO MARCA VALUES (NULL,'XIOMI','1');
INSERT INTO MARCA VALUES (NULL,'ACER','1');
INSERT INTO MARCA VALUES (NULL,'HP','1');
INSERT INTO MARCA VALUES (NULL,'LENOVO','1');
INSERT INTO MARCA VALUES (NULL,'DELL','1');
INSERT INTO MARCA VALUES (NULL,'AOC','1');

CREATE TABLE ARTICULO(
ID_ART INT  PRIMARY KEY AUTO_INCREMENT ,
MODELO_ART VARCHAR(50),
PRECIO_ART numeric,
STOCK_ART INT,
DESC_ART VARCHAR(1500), 
ESTADO_ART CHAR(1),
IMAGEN_ART VARCHAR(100),
ID_CAT INT,
ID_MARCA INT, 
 FOREIGN KEY (ID_CAT)REFERENCES CATEGORIA(ID_CAT),
 FOREIGN KEY (ID_MARCA)REFERENCES MARCA(ID_MARCA)
);

insert into ARTICULO values(NULL,'AUDIFONOS TRUST ','150','10','SONIDO POTENTE, SUAVES Y CÓMODAS ALMOHADILLAS, CABLE DE 1.30m','A','recursos/images/audifonogamertrust.png',5,3);
insert into ARTICULO values(NULL,'CELULAR HUAWEI','1200','10','6.15 PULGADAS LCD PÍXELES Notch PROCESADOR Huawei Kirin 970 RAM 4 GB ALMACENAMIENTO 128 GB','A','recursos/images/celularhuawei.png',3,1);
insert into ARTICULO values(NULL,'PC ADVANCE','2100.0','10','COMPUTADORA ADVANCE VS1070 1TB 4GB RAM 19.5 CORE I5-7400 WINDOWS 10','A','recursos/images/pcadvance.png',2,4);
insert into ARTICULO values(NULL,'PLAYSTATION 4','1800.0','10','PLAYSTATION 4 1TB + DAYS GONE + DETROIT + RAINBOWSIX','A','recursos/images/ps4.png',6,6);
insert into ARTICULO values(NULL,'MOUSE LOGITECH','150','10','MOUSE INALAMBRICO BLUETOOTH LOGITECH G603 GAMING','A','recursos/images/mouselogitech.png',7,7);
insert into ARTICULO values(NULL,'AUDIFONOS JBL ','180','10','SONIDO POTENTE, SUAVES Y DE CUERO ALMOHADILLAS, ELEGANTE Y RESISTENTE','A','recursos/images/audifonojbl.png',5,8);
insert into ARTICULO values(NULL,'AUDIFONOS MAXELL ','180','10','SONIDO POTENTE, SUAVES Y DE CUERO ALMOHADILLAS,CABLE TRENZADO DE 1.5m','A','recursos/images/audifonomaxell.png',5,9);
insert into ARTICULO values(NULL,'AUDIFONOS MOTOROLA ','180','10','BLUETOOTH 4.2, MICROFONO INTEGRADO,BATERIA 180mAh','A','recursos/images/audifonomotorola.png',5,10);
insert into ARTICULO values(NULL,'AUDIFONOS SKULLCANDY','125','10','BLUETOOTH , ALMOHADILLAS COMODAS,BATERIA LARGA DURACION','A','recursos/images/audifonoskullcandy.png',5,11);
insert into ARTICULO values(NULL,'AUDIFONOS SKULLCANDY','125','10','BLUETOOTH , CARGA RAPIDA,BATERIA 12h','A','recursos/images/audifonoskullcandy2.png',5,11);
insert into ARTICULO values(NULL,'AUDIFONOS SONY','125','10','SONIDO POTENTE ,ACOLCHADAS','A','recursos/images/audifonosony.png',5,6);
insert into ARTICULO values(NULL,'CELULAR SAMSUNG','840','10','DOBLE CAMARA ,CUERPO LIGERO,64GB 4GB RAM','A','recursos/images/celular.png',3,5);
insert into ARTICULO values(NULL,'CELULAR HUAWEI','980','10','PANTALLA 6.1",TRIPLE CAMARA TRASERA 128GB 4GB RAM','A','recursos/images/celularhuawei.png',3,1);
insert into ARTICULO values(NULL,'CELULAR XIAOMI','1760','10','PANTALLA 6.39",TRIPLE CAMARA TRASERA 128GB 6GB RAM','A','recursos/images/celularxiaomi.png',3,15);
insert into ARTICULO values(NULL,'CELULAR LG','540','10','PANTALLA 5.7" ,MEMORIA EXPANDIBLE 32 GB ,CAMARA 16MP','A','recursos/images/celularlg.png',3,12);
insert into ARTICULO values(NULL,'CELULAR MOTOROLA','540','10','PANTALLA 6.2"HD+ 32GB 3GB RAM','A','recursos/images/celularmotorola.png',3,14);
insert into ARTICULO values(NULL,'LAPTOP ASUS','2950.0','10','NOTEBOOK ASUS X509FJ-BR092T 1TB 8GB RAM 15.6" INTEL CORE i5-8265U NVIDIA GeForce MX230 2GB','A','recursos/images/laptopasus.png',1,2);
insert into ARTICULO values(NULL,'LAPTOP ACER','2950','10','LAPTOP ACER A515-51-55HD 1TB 4GB RAM 15.6" INTEL CORE i7+8th GeN, NVIDIA GEFORCE','A','recursos/images/laptopacer.png',1,16);
insert into ARTICULO values(NULL,'LAPTOP HP','2770','10','NOTEBOOK HP 15-DA0031 1TB 12GB RAM 15.6" INTEL COREi7+8th GeN, NVIDIA ','A','recursos/images/laptophp.png',1,17);
insert into ARTICULO values(NULL,'LAPTOP LENOVO','2850','10','NOTEBOOK LENOVO IDEAPAD S340CORE 1TB 8GB RAM 16.5" INTEL COREi7+8th GeN, NVIDIA GEFORCE','A','recursos/images/laptoplenovo.png',1,18);
insert into ARTICULO values(NULL,'PC DELL','1500','10','DELL OPTIPLEX 3020 1TB 8GB RAM CORE I5-4590 WINDOWS 10','A','recursos/images/pcdell.png',2,19);
insert into ARTICULO values(NULL,'PC HP','1450','10','HP SLIM DESKTOP 290-p004la 1TB 8GB RAM CORE  i5 8400 WINDOWS 10','A','recursos/images/pchp.png',2,17);
insert into ARTICULO values(NULL,'TECLADO LOGITECH ','180','10','LOGITECH G213 PRODIGY,  COMODO Y DURADERO,ILUMINACION COLORES','A','recursos/images/teclado.png',8,7);
insert into ARTICULO values(NULL,'TV AOC ','180','10','TELEVISOR SMART TV AOC Le50u7970 4K 50" ','A','recursos/images/tvaoc.png',4,20);
insert into ARTICULO values(NULL,'TV PANASONIC ','1180','10','SMART TV LED PANASONIC Tc-43fx500  4K 50" ','A','recursos/images/tvpanasonic.png',4,12);
insert into ARTICULO values(NULL,'TV SAMSUNG ','2150','10','SMART TV SAMSUNG Ru7300 4K 55" CURVO','A','recursos/images/tvsamsung.png',4,5);
insert into ARTICULO values(NULL,'TV SONY ','2150','10','SMART TV SONY Hd Kd-55x725f 4K 55"','A','recursos/images/tvsony.png',4,6);

DELIMITER //
	CREATE PROCEDURE selectArticulos()
	BEGIN
		SELECT * FROM ARTICULO;
	END	
//

call selectArticulos();

DELIMITER //
	CREATE PROCEDURE selectArticulo(
		IN _ID_ART int
	)
	BEGIN
		SELECT * FROM ARTICULO WHERE ID_ART = _ID_ART;
	END	
//

call selectArticulo(4);


CREATE TABLE DETALLE( 
ID_DET INT PRIMARY KEY AUTO_INCREMENT ,
ID_ART INT,
CANTIDAD_DET INT,
PRECIOVENTA_DET DOUBLE,
 FOREIGN KEY (ID_ART)REFERENCES ARTICULO(ID_ART)
);
INSERT INTO DETALLE VALUES (NULL,'1','2','0.0');

CREATE TABLE COMPROBANTE(
ID_COMP INT PRIMARY KEY AUTO_INCREMENT ,
ID_CLI INT,
FECH_COMPR char(10),
ID_TIP_COMP INT,
ID_DET INT,
 FOREIGN KEY (ID_CLI)REFERENCES CLIENTE(ID_CLI),
 FOREIGN KEY (ID_TIP_COMP)REFERENCES TIPO_COMPROBANTE(ID_TIP_COMP), 
FOREIGN KEY (ID_DET)REFERENCES DETALLE(ID_DET)
);
INSERT INTO COMPROBANTE VALUES (NULL,'1','20-12-2019','1','1');